#!/usr/bin/env bash

echo "🔍 Running linting and formatting before push..."

# Debug information
echo "📊 Debug - Shell environment:"
echo "PATH: $PATH"
echo "Which node: $(which node)"
echo "Shell node version: $(node -v)"
echo "Shell: $SHELL"

# Skip linting if running on Node.js < 18
node_version=$(node -v | cut -d. -f1 | sed 's/v//')
if [ "$node_version" -lt 18 ]; then
  echo "⚠️ Warning: Node.js version $(node -v) is less than 18. ESLint 9 requires Node.js 18.17.0+."
  echo "⚠️ Skipping linting to allow push. Please use Node.js 20+ for development."
  exit 0
fi

# Run linting only if we have a compatible Node.js version
pnpm fix-all 